

### SHA256
SHA是安全散列算法（Secure Hash Algorithm）的缩写，是一个密码散列函数家族。这一组函数是由美国国家安全局（NSA）设计，美国国家标准与技术研究院（NIST） 发布的，主要适用于数字签名标准。SHA256就是这个函数家族中的一个，是输出值为256位的哈希算法。

### 区块
**区块头**
区块头的大小为80字节，由4字节的版本号、32字节的上一个区块的散列值、32字节的Merkle Root Hash、4字节的时间缀（当前时间）、4字节的当前难度值、4字节的随机数组成。
区块包含的交易列表则附加在区块头后面，其中的第一笔交易是coinbase交易，这是一笔为了让矿工获得奖励及手续费的特殊交易


### Merkle Tree算法生成Merkle Root Hash


### 疑问&心得
1. 之所以说比特币最多只有2100万，不是因为算法只有2100万个解。而是每次挖矿发放的奖励会越来越少，系统中的总币数达到2100万时，挖到一个新的块就没有奖励了，矿工只能通过手续费来获得收益。
2. 挖到一个新的区块的时候，就确定会有多少交易写到改区块？如果平均10分钟挖到一个区块，那么这10分钟的交易记录保持在哪呢，怎么决定一个区块包含哪些交易记录呢，矿工是否能够选择记录哪些记录呢？
3. 使用Merkle Tree算法生成Merkle Root Hash之后，已经不包含之前的交易记录了，怎么判断一个区块包含哪些交易呢
4. 每个区块最多能存放多少交易记录

### 难度值（difficulty）
难度值（difficulty）是矿工们在挖矿时候的重要参考指标，它决定了矿工大约需要经过多少次哈希运算才能产生一个合法的区块。比特币的区块大约每10分钟生成一个，如果要在不同的全网算力条件下，新区块的产生保持都基本这个速率，难度值必须根据全网算力的变化进行调整。简单地说，难度值被设定在无论挖矿能力如何，新区块产生速率都保持在10分钟一个。
难度的调整是在每个完整节点中独立自动发生的。每2016个区块，所有节点都会按统一的公式自动调整难度。
```
新难度值 = 旧难度值 * ( 过去2016个区块花费时长 / 20160 分钟 )
```

工作量证明需要有一个目标值。比特币工作量证明的目标值（Target）的计算公式如下：
```
目标值 = 最大目标值 / 难度值
其中最大目标值为一个恒定值：
0x00000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
```
目标值的大小与难度值成反比。比特币工作量证明的达成就是矿工计算出来的区块哈希值必须小于目标值。

### 参考
http://www.infoq.com/cn/articles/bitcoin-and-block-chain-part02?utm_source=infoq&utm_campaign=user_page&utm_medium=link

